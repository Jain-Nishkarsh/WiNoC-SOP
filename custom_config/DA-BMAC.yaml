# DA+BMAC Configuration for 8x8 mesh with 16 radio hubs

# NOC & WIRED CONFIGURATION
topology: MESH
mesh_dim_x: 8
mesh_dim_y: 8
buffer_depth: 4
flit_size: 16
r2h_link_length: 2.0
r2r_link_length: 1.0
n_virtual_channels: 1

min_packet_size: 8
max_packet_size: 8
packet_injection_rate: 0.0001

# Use custom distance-aware routing
routing_algorithm: DA_BMAC
routing_table_filename: ""

# Distance threshold for wireless vs wired routing decision
da_threshold: 5

#(Neighbors-on-Path): Prioritizes paths closer to the destination.
selection_strategy: NOP

# WIRELESS CONFIGURATION - 16 radio hubs in 4x4 configuration
use_winoc: true
use_wirxsleep: false

Hubs:
    defaults:
        rx_radio_channels: [0]
        tx_radio_channels: [0]
        attached_nodes: []
        to_tile_buffer_size: 4
        from_tile_buffer_size: 4
        rx_buffer_size: 4
        tx_buffer_size: 4
        # BMAC specific parameters  
        token_hold_cycles: 8

    # Hub 0: covers tiles (0,0), (0,1), (1,0), (1,1) - nodes 0,1,8,9
    0:
        attached_nodes: [0,1,8,9]
        hub_position: [0.5, 0.5]

    # Hub 1: covers tiles (0,2), (0,3), (1,2), (1,3) - nodes 2,3,10,11
    1:
        attached_nodes: [2,3,10,11]
        hub_position: [0.5, 2.5]

    # Hub 2: covers tiles (0,4), (0,5), (1,4), (1,5) - nodes 4,5,12,13
    2:
        attached_nodes: [4,5,12,13]
        hub_position: [0.5, 4.5]

    # Hub 3: covers tiles (0,6), (0,7), (1,6), (1,7) - nodes 6,7,14,15
    3:
        attached_nodes: [6,7,14,15]
        hub_position: [0.5, 6.5]

    # Hub 4: covers tiles (2,0), (2,1), (3,0), (3,1) - nodes 16,17,24,25
    4:
        attached_nodes: [16,17,24,25]
        hub_position: [2.5, 0.5]

    # Hub 5: covers tiles (2,2), (2,3), (3,2), (3,3) - nodes 18,19,26,27
    5:
        attached_nodes: [18,19,26,27]
        hub_position: [2.5, 2.5]

    # Hub 6: covers tiles (2,4), (2,5), (3,4), (3,5) - nodes 20,21,28,29
    6:
        attached_nodes: [20,21,28,29]
        hub_position: [2.5, 4.5]

    # Hub 7: covers tiles (2,6), (2,7), (3,6), (3,7) - nodes 22,23,30,31
    7:
        attached_nodes: [22,23,30,31]
        hub_position: [2.5, 6.5]

    # Hub 8: covers tiles (4,0), (4,1), (5,0), (5,1) - nodes 32,33,40,41
    8:
        attached_nodes: [32,33,40,41]
        hub_position: [4.5, 0.5]

    # Hub 9: covers tiles (4,2), (4,3), (5,2), (5,3) - nodes 34,35,42,43
    9:
        attached_nodes: [34,35,42,43]
        hub_position: [4.5, 2.5]

    # Hub 10: covers tiles (4,4), (4,5), (5,4), (5,5) - nodes 36,37,44,45
    10:
        attached_nodes: [36,37,44,45]
        hub_position: [4.5, 4.5]

    # Hub 11: covers tiles (4,6), (4,7), (5,6), (5,7) - nodes 38,39,46,47
    11:
        attached_nodes: [38,39,46,47]
        hub_position: [4.5, 6.5]

    # Hub 12: covers tiles (6,0), (6,1), (7,0), (7,1) - nodes 48,49,56,57
    12:
        attached_nodes: [48,49,56,57]
        hub_position: [6.5, 0.5]

    # Hub 13: covers tiles (6,2), (6,3), (7,2), (7,3) - nodes 50,51,58,59
    13:
        attached_nodes: [50,51,58,59]
        hub_position: [6.5, 2.5]

    # Hub 14: covers tiles (6,4), (6,5), (7,4), (7,5) - nodes 52,53,60,61
    14:
        attached_nodes: [52,53,60,61]
        hub_position: [6.5, 4.5]

    # Hub 15: covers tiles (6,6), (6,7), (7,6), (7,7) - nodes 54,55,62,63
    15:
        attached_nodes: [54,55,62,63]
        hub_position: [6.5, 6.5]

RadioChannels:
    defaults:
        # 60 GHz specifications from paper
        data_rate: 16
        frequency_ghz: 60
        ber: [0, 0]
        # BMAC bidirectional token protocol
        mac_policy: [BMAC_BIDIRECTIONAL]
        token_ring_order: [0,1,2,3,7,6,5,9,10,11,15,14,13,12,8,4]

# SIMULATION PARAMETERS
clock_period_ps: 1000
reset_time: 1000
simulation_time: 100000
stats_warm_up_time: 1000
detailed: false
max_volume_to_be_drained: 0
show_buffer_stats: true

verbose_mode: VERBOSE_HIGH

trace_mode: false
trace_filename: ""

# Traffic patterns for validation
traffic_distribution: TRAFFIC_RANDOM
# Alternative patterns for testing:
# TRAFFIC_TRANSPOSE1, TRAFFIC_SHUFFLE, TRAFFIC_HOTSPOT
traffic_table_filename: "t.txt"

# Energy model parameters
enable_power_analysis: true
wireless_tx_power_mw: 0.5
wireless_rx_power_mw: 0.3
wireless_idle_power_mw: 0.1
router_power_mw: 8.75
link_power_mw: 0.5

dyad_threshold: 0.6
probability_of_retransmission: 0.01